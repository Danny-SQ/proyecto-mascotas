import{G as H,I as R,c as T,d as B,e as D,l as A,m as z,r as K,s as L,t as j,w as q,x as Y}from"./chunk-YRUIN5XR.js";import"./chunk-PQYJBGAA.js";import"./chunk-QUJFQN2Y.js";import"./chunk-Y76GOPZE.js";import"./chunk-UW5QJ6AD.js";import"./chunk-KYBO7Z6X.js";import"./chunk-TUCPQ5Z2.js";import"./chunk-ZSUB4R5K.js";import"./chunk-Q2PL7KOI.js";import"./chunk-7FY2OE2O.js";import"./chunk-6GBC3BOG.js";import"./chunk-KKVHPS2N.js";import"./chunk-MTHZ7MWU.js";import"./chunk-WI5MSH4N.js";import"./chunk-ES6BQY3W.js";import"./chunk-CKP3SGE2.js";import"./chunk-AZEOPQ6H.js";import{$a as W,B as f,C as i,D as o,E as b,L as _,T as r,Ta as E,Ua as S,V as O,Va as I,Wa as V,X as g,Xa as k,Y as h,Z as u,_a as N,ab as F,ea as v,ja as w,la as x,na as y,q as l,r as m,t as M,x as P}from"./chunk-AADIVYK7.js";import"./chunk-XCLEG6OQ.js";import"./chunk-URNNXDMV.js";import"./chunk-WNO4XRYS.js";import"./chunk-Y6EF4666.js";import"./chunk-R5HL6L5F.js";import"./chunk-M2X7KQLB.js";import"./chunk-XTVTS2NW.js";import"./chunk-C5RQ2IC2.js";import"./chunk-42C7ZIID.js";import{e as p}from"./chunk-JHI3MBHO.js";function G(d,c){if(d&1&&(i(0,"ion-select-option",16),r(1),o()),d&2){let C=c.$implicit;f("value",C.id),l(),O(" ",C.nombre," ")}}var it=(()=>{let c=class c{constructor(t,a,e,s){this.http=t,this.navCtrl=a,this.alertCtrl=e,this.route=s,this.mascotas=[],this.cuidadorId=null,this.vacunaId=null,this.tipo="",this.fecha_aplicacion="",this.dosis="",this.mascota_id=null}ionViewWillEnter(){let t=localStorage.getItem("cuidador");if(!t){this.navCtrl.navigateRoot("/login");return}let a=JSON.parse(t);if(this.cuidadorId=a.id,this.vacunaId=Number(this.route.snapshot.paramMap.get("id")),!this.vacunaId){this.navCtrl.navigateBack("/home-vaccine");return}this.cargarMascotas(),this.cargarVacuna()}cargarMascotas(){this.http.get(`http://localhost:5000/api/mascotas/cuidador/${this.cuidadorId}`).subscribe({next:t=>this.mascotas=t,error:()=>p(this,null,function*(){yield(yield this.alertCtrl.create({header:"Error",message:"No se pudieron cargar las mascotas",buttons:["OK"]})).present()})})}cargarVacuna(){this.http.get(`http://localhost:5000/api/vacunas/${this.vacunaId}`).subscribe({next:t=>{this.tipo=t.tipo,this.fecha_aplicacion=t.fecha_aplicacion,this.dosis=t.dosis,this.mascota_id=t.mascota_id},error:()=>p(this,null,function*(){yield(yield this.alertCtrl.create({header:"Error",message:"No se pudo cargar la vacuna",buttons:["OK"]})).present(),this.navCtrl.navigateBack("/home-vaccine")})})}guardarCambios(){return p(this,null,function*(){if(!this.mascota_id){yield(yield this.alertCtrl.create({header:"Validaci\xF3n",message:"Debe seleccionar una mascota",buttons:["OK"]})).present();return}if(!this.tipo.trim()){yield(yield this.alertCtrl.create({header:"Validaci\xF3n",message:"Debe ingresar el tipo de vacuna",buttons:["OK"]})).present();return}if(!this.fecha_aplicacion){yield(yield this.alertCtrl.create({header:"Validaci\xF3n",message:"Debe ingresar la fecha de aplicaci\xF3n",buttons:["OK"]})).present();return}let t={tipo:this.tipo,fecha_aplicacion:this.fecha_aplicacion,dosis:this.dosis,mascota_id:this.mascota_id};this.http.put(`http://localhost:5000/api/vacunas/${this.vacunaId}`,t).subscribe({next:()=>this.navCtrl.navigateBack("/home-vaccine"),error:()=>p(this,null,function*(){yield(yield this.alertCtrl.create({header:"Error",message:"No se pudieron guardar los cambios",buttons:["OK"]})).present()})})})}irAHomeFuncionalidad(){this.navCtrl.navigateBack("/home-vaccine")}};c.\u0275fac=function(a){return new(a||c)(m(x),m(F),m(H),m(y))},c.\u0275cmp=M({type:c,selectors:[["app-edit-vaccine"]],decls:30,vars:5,consts:[[1,"ion-padding"],[1,"content-wrapper"],[1,"header-container"],[1,"app-title"],["src","\\assets\\img\\pet-paws.png","alt","Patas de mascota",1,"app-logo"],[1,"access-title"],[1,"edit-form",3,"submit"],[1,"form-item"],["position","stacked"],["name","tipo","required","",3,"ngModelChange","ngModel"],["display-format","YYYY-MM-DD","name","fecha_aplicacion","required","",1,"datetime-popover",3,"ngModelChange","ngModel"],["name","dosis",3,"ngModelChange","ngModel"],["name","mascota_id","interface","popover","required","",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["expand","block","type","submit",1,"login-button"],["expand","block","color","medium",1,"cancel-button",3,"click"],[3,"value"]],template:function(a,e){a&1&&(i(0,"ion-content",0)(1,"div",1)(2,"div",2)(3,"h1",3),r(4,"Editar Vacuna"),o(),b(5,"img",4),o(),i(6,"h2",5),r(7,"Modificar detalles de la vacuna"),o(),i(8,"form",6),_("submit",function(){return e.guardarCambios()}),i(9,"ion-item",7)(10,"ion-label",8),r(11,"Tipo"),o(),i(12,"ion-input",9),u("ngModelChange",function(n){return h(e.tipo,n)||(e.tipo=n),n}),o()(),i(13,"ion-item",7)(14,"ion-label",8),r(15,"Fecha Aplicaci\xF3n"),o(),i(16,"ion-datetime",10),u("ngModelChange",function(n){return h(e.fecha_aplicacion,n)||(e.fecha_aplicacion=n),n}),o()(),i(17,"ion-item",7)(18,"ion-label",8),r(19,"Dosis"),o(),i(20,"ion-input",11),u("ngModelChange",function(n){return h(e.dosis,n)||(e.dosis=n),n}),o()(),i(21,"ion-item",7)(22,"ion-label",8),r(23,"Seleccionar Mascota"),o(),i(24,"ion-select",12),u("ngModelChange",function(n){return h(e.mascota_id,n)||(e.mascota_id=n),n}),P(25,G,2,2,"ion-select-option",13),o()(),i(26,"ion-button",14),r(27," Guardar Cambios "),o(),i(28,"ion-button",15),_("click",function(){return e.irAHomeFuncionalidad()}),r(29," Cancelar "),o()()()()),a&2&&(l(12),g("ngModel",e.tipo),l(4),g("ngModel",e.fecha_aplicacion),l(4),g("ngModel",e.dosis),l(4),g("ngModel",e.mascota_id),l(),f("ngForOf",e.mascotas))},dependencies:[w,v,R,D,A,z,K,L,j,q,Y,T,B,W,k,E,S,N,V,I],styles:["ion-content[_ngcontent-%COMP%]{--background: #e8f0f2}ion-content[_ngcontent-%COMP%]   .content-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:20px}ion-content[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]{text-align:center;margin-top:50px;margin-bottom:20px}ion-content[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .app-title[_ngcontent-%COMP%]{font-family:Poppins,sans-serif;font-size:2.2em;font-weight:700;color:#1a1a2e;margin:0}ion-content[_ngcontent-%COMP%]   .header-container[_ngcontent-%COMP%]   .app-logo[_ngcontent-%COMP%]{width:150px;height:auto;margin-top:15px;border-radius:10px}ion-content[_ngcontent-%COMP%]   .access-title[_ngcontent-%COMP%]{font-family:Poppins,sans-serif;font-size:1.6em;font-weight:600;color:#1a1a2e;margin-top:40px;margin-bottom:30px}ion-content[_ngcontent-%COMP%]   .edit-form[_ngcontent-%COMP%]{width:100%;max-width:400px;margin:0 auto}ion-content[_ngcontent-%COMP%]   .edit-form[_ngcontent-%COMP%]   .form-item[_ngcontent-%COMP%]{--background: #fff;--border-radius: 15px;--border-color: transparent;--padding-start: 15px;--padding-end: 15px;--highlight-color-focused: transparent;margin-bottom:15px;box-shadow:0 4px 10px #0000000d}ion-content[_ngcontent-%COMP%]   .edit-form[_ngcontent-%COMP%]   .form-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-family:Poppins,sans-serif;color:#aebfd0;font-size:.9em;font-weight:500}ion-content[_ngcontent-%COMP%]   .edit-form[_ngcontent-%COMP%]   .form-item[_ngcontent-%COMP%]   ion-datetime[_ngcontent-%COMP%], ion-content[_ngcontent-%COMP%]   .edit-form[_ngcontent-%COMP%]   .form-item[_ngcontent-%COMP%]   ion-select[_ngcontent-%COMP%], ion-content[_ngcontent-%COMP%]   .edit-form[_ngcontent-%COMP%]   .form-item[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%], ion-content[_ngcontent-%COMP%]   .edit-form[_ngcontent-%COMP%]   .form-item[_ngcontent-%COMP%]   ion-textarea[_ngcontent-%COMP%]{color:#1a1a2e;font-family:Poppins,sans-serif;font-size:.9em}ion-content[_ngcontent-%COMP%]   ion-datetime[_ngcontent-%COMP%]{--background: transparent;--placeholder-color: #1a1a2e;--placeholder-opacity: .8}ion-content[_ngcontent-%COMP%]   ion-popover.datetime-popover[_ngcontent-%COMP%]   .popover-content[_ngcontent-%COMP%]{--background: #f5f8fa;--box-shadow: 0 4px 10px rgba(0, 0, 0, .1);--border-radius: 15px}ion-content[_ngcontent-%COMP%]   ion-popover.datetime-popover[_ngcontent-%COMP%]   .datetime-popover-button[_ngcontent-%COMP%]{--background: #ff5722;--color: #fff;--border-radius: 10px;margin:10px}ion-content[_ngcontent-%COMP%]   .login-button[_ngcontent-%COMP%]{--background: #ff5722;--border-radius: 15px;--box-shadow: 0 4px 10px rgba(255, 87, 34, .3);height:55px;font-size:1.1em;font-weight:600;margin-top:30px;width:100%;max-width:400px;font-family:Poppins,sans-serif}ion-content[_ngcontent-%COMP%]   .cancel-button[_ngcontent-%COMP%]{--background: #b0c4de;--color: #1a1a2e;--border-radius: 15px;--box-shadow: none;height:55px;font-size:1.1em;font-weight:600;margin-top:15px;width:100%;max-width:400px;font-family:Poppins,sans-serif}"]});let d=c;return d})();export{it as EditVaccinePage};
